# Base configuration for sites which have UA template switching, eg.  mobi
# sites. 
#
# Do not edit unless you know what you are doing.

[buildout]
extensions=
    lovely.buildouthttp
parts=
    skeleton
    skeleton-supervisor-django
    directories
eggs=
    psycopg2
    jmbo-skeleton
extends = 
    versions.cfg
versions = versions    
develop = .
unzip = true
auto-checkout = *

[skeleton]
recipe = djangorecipe
project = skeleton
projectegg = skeleton
eggs = ${buildout:eggs}
settings = settings_DEPLOY_TYPE_PLACEHOLDER_${buildout:site-type}_${buildout:site-name}
control-script = skeleton-DEPLOY_TYPE_PLACEHOLDER-${buildout:site-type}-${buildout:site-name}

[skeleton-supervisor-django]
recipe = collective.recipe.template
input = buildout_templates/supervisor-django.conf.in
output = ${buildout:directory}/supervisor/skeleton-DEPLOY_TYPE_PLACEHOLDER-${buildout:site-type}-${buildout:site-name}-django.conf
name = skeleton-DEPLOY_TYPE_PLACEHOLDER-${buildout:site-type}-${buildout:site-name}
control-script = skeleton-DEPLOY_TYPE_PLACEHOLDER-${buildout:site-type}-${buildout:site-name}
host = 127.0.0.1
max-requests = 10000
user = www-data
log = ${buildout:directory}/../log/skeleton/DEPLOY_TYPE_PLACEHOLDER/${buildout:site-type}/${buildout:site-name}/django.log
error-log = ${buildout:directory}/../log/skeleton/DEPLOY_TYPE_PLACEHOLDER/${buildout:site-type}/${buildout:site-name}/django-error.log

[directories]
recipe = z3c.recipe.mkdir
paths = 
    ../skeleton-media-DEPLOY_TYPE_PLACEHOLDER/uploads
    ../skeleton-media-DEPLOY_TYPE_PLACEHOLDER/downloads
    ../log/skeleton/DEPLOY_TYPE_PLACEHOLDER/${buildout:site-type}/${buildout:site-name}
